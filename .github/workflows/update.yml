---
'on':
  push:

jobs:
  collect_pr:
    runs-on: ubuntu-latest
    steps:
      - name: Check out
        uses: actions/checkout@v2
      - uses: octokit/graphql-action@v2.x
        id: get_pulls
        with:
          query: |
            query user($login:String!) {
              user(login:$login) {
                pullRequests(last: 100) {
                  edges {
                    node {
                      id
                      repository {
                        id
                        name
                      }
                      title
                      state
                    }
                  }
                }
              }
            }
          login: ${{ github.event.repository.owner.login }}
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      - run: "echo 'latest release: ${{ steps.get_pulls.outputs.data }}'"
